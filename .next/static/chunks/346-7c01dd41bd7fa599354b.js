(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{9008:function(e,t,r){e.exports=r(639)},2693:function(e,t,r){"use strict";const n=r(9353),o=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class i extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const s=(e,t)=>new Promise(((r,s)=>{t={onFailedAttempt:()=>{},retries:10,...t};const a=n.operation(t);a.attempt((async n=>{try{r(await e(n))}catch(c){if(!(c instanceof Error))return void s(new TypeError(`Non-error was thrown: "${c}". You should only throw errors.`));if(c instanceof i)a.stop(),s(c.originalError);else if(c instanceof TypeError&&(u=c.message,!o.includes(u)))a.stop(),s(c);else{((e,t,r)=>{const n=r.retries-(t-1);e.attemptNumber=t,e.retriesLeft=n})(c,n,t);try{await t.onFailedAttempt(c)}catch(c){return void s(c)}a.retry(c)||s(a.mainError())}}var u}))}));e.exports=s,e.exports.default=s,e.exports.AbortError=i},4155:function(e){var t,r,n=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"===typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var a,u=[],c=!1,f=-1;function h(){c&&a&&(c=!1,a.length?u=a.concat(u):f=-1,u.length&&l())}function l(){if(!c){var e=s(h);c=!0;for(var t=u.length;t;){for(a=u,u=[];++f<t;)a&&a[f].run();f=-1,t=u.length}a=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||c||s(l)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},9353:function(e,t,r){e.exports=r(1846)},1846:function(e,t,r){var n=r(1960);t.operation=function(e){var r=t.timeouts(e);return new n(r,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],o=0;o<t.retries;o++)n.push(this.createTimeout(o,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(o,t)),n.sort((function(e,t){return e-t})),n},t.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return n=Math.min(n,t.maxTimeout)},t.wrap=function(e,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var o in n=[],e)"function"===typeof e[o]&&n.push(o);for(var i=0;i<n.length;i++){var s=n[i],a=e[s];e[s]=function(n){var o=t.operation(r),i=Array.prototype.slice.call(arguments,1),s=i.pop();i.push((function(e){o.retry(e)||(e&&(arguments[0]=o.mainError()),s.apply(this,arguments))})),o.attempt((function(){n.apply(e,i)}))}.bind(e,a),e[s].options=r}}},1960:function(e){function t(e,t){"boolean"===typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout((function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout((function(){n._operationTimeoutCb(n._attempts)}),n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)}),r),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var o=this._errors[n],i=o.message,s=(e[i]||0)+1;e[i]=s,s>=r&&(t=o,r=s)}return t}},6988:function(e){e.exports=function e(t,r){var n,o=0,i=0,s=r=r||0,a=t.length;do{if(s>=a||i>49)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],o+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=s-r,o}},1312:function(e){e.exports=function e(r,n,o){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");n=n||[];var i=o=o||0;for(;r>=t;)n[o++]=255&r|128,r/=128;for(;-128&r;)n[o++]=255&r|128,r>>>=7;return n[o]=0|r,e.bytes=o-i+1,n};var t=Math.pow(2,31)},4676:function(e,t,r){e.exports={encode:r(1312),decode:r(6988),encodingLength:r(82)}},82:function(e){var t=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),o=Math.pow(2,28),i=Math.pow(2,35),s=Math.pow(2,42),a=Math.pow(2,49),u=Math.pow(2,56),c=Math.pow(2,63);e.exports=function(e){return e<t?1:e<r?2:e<n?3:e<o?4:e<i?5:e<s?6:e<a?7:e<u?8:e<c?9:10}},3093:function(e,t,r){"use strict";var n={};r.r(n),r.d(n,{code:function(){return yt},decode:function(){return bt},encode:function(){return gt},name:function(){return mt}});var o={};r.r(o),r.d(o,{code:function(){return Et},decode:function(){return kt},encode:function(){return Tt},name:function(){return vt}});var i={};r.r(i),r.d(i,{code:function(){return Wt},createLink:function(){return qt},createNode:function(){return Vt},decode:function(){return Qt},encode:function(){return Kt},name:function(){return Jt},prepare:function(){return Gt},validate:function(){return Ft}});r(4155);r(2693),r(4676);var s=function e(t,r,n){r=r||[];var o=n=n||0;for(;t>=a;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-o+1,r},a=Math.pow(2,31);var u=function e(t,r){var n,o=0,i=0,s=r=r||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],o+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=s-r,o};var c=Math.pow(2,7),f=Math.pow(2,14),h=Math.pow(2,21),l=Math.pow(2,28),d=Math.pow(2,35),p=Math.pow(2,42),w=Math.pow(2,49),m=Math.pow(2,56),y=Math.pow(2,63),g={encode:s,decode:u,encodingLength:function(e){return e<c?1:e<f?2:e<h?3:e<l?4:e<d?5:e<p?6:e<w?7:e<m?8:e<y?9:10}};const b=e=>[g.decode(e),g.decode.bytes],v=(e,t,r=0)=>(g.encode(e,t,r),t),E=e=>g.encodingLength(e),T=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),k=e=>{const t=T(e),[r,n]=b(t),[o,i]=b(t.subarray(n)),s=t.subarray(n+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new A(r,o,s,t)};class A{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}var C=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(255!==r[s])throw new TypeError(i+" is ambiguous");r[s]=o}var a=e.length,u=e.charAt(0),c=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function h(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,o=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,s=new Uint8Array(i);e[t];){var f=r[e.charCodeAt(t)];if(255===f)return;for(var h=0,l=i-1;(0!==f||h<o)&&-1!==l;l--,h++)f+=a*s[l]>>>0,s[l]=f%256>>>0,f=f/256>>>0;if(0!==f)throw new Error("Non-zero carry");o=h,t++}if(" "!==e[t]){for(var d=i-o;d!==i&&0===s[d];)d++;for(var p=new Uint8Array(n+(i-d)),w=n;d!==i;)p[w++]=s[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,o=0,i=t.length;o!==i&&0===t[o];)o++,r++;for(var s=(i-o)*f+1>>>0,c=new Uint8Array(s);o!==i;){for(var h=t[o],l=0,d=s-1;(0!==h||l<n)&&-1!==d;d--,l++)h+=256*c[d]>>>0,c[d]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=l,o++}for(var p=s-n;p!==s&&0===c[p];)p++;for(var w=u.repeat(r);p<s;++p)w+=e.charAt(c[p]);return w},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}};class B{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class I{constructor(e,t,r){this.name=e,this.prefix=t,this.baseDecode=r}decode(e){if("string"!==typeof e)throw Error("Can only multibase decode strings");switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}}or(e){const t={[this.prefix]:this,...e.decoders||{[e.prefix]:e}};return new x(t)}}class x{constructor(e){this.decoders=e}or(e){const t=e.decoders||{[e.prefix]:e};return new x({...this.decoders,...t})}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}class N{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new B(e,t,r),this.decoder=new I(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const D=({name:e,prefix:t,encode:r,decode:n})=>new N(e,t,r,n),_=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:o}=C(r,t);return D({prefix:e,name:t,encode:n,decode:e=>T(o(e))})},U=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>D({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],o=(1<<r)-1;let i="",s=0,a=0;for(let u=0;u<e.length;++u)for(a=a<<8|e[u],s+=8;s>r;)s-=r,i+=t[o&a>>s];if(s&&(i+=t[o&a<<r-s]),n)for(;i.length*r&7;)i+="=";return i})(e,n,r),decode:t=>((e,t,r,n)=>{const o={};for(let f=0;f<t.length;++f)o[t[f]]=f;let i=e.length;for(;"="===e[i-1];)--i;const s=new Uint8Array(i*r/8|0);let a=0,u=0,c=0;for(let f=0;f<i;++f){const t=o[e[f]];if(void 0===t)throw new SyntaxError(`Non-${n} character`);u=u<<r|t,a+=r,a>=8&&(a-=8,s[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s})(t,n,r,e)}),R=_({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),S=(_({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),U({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}));U({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),U({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),U({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),U({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),U({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),U({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),U({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),U({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});class L{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:F,byteLength:F,code:G,version:G,multihash:G,bytes:G,_baseCache:F,asCID:F})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:t}=this;if(e!==M)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==P)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return L.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=((e,t)=>{const r=t.byteLength,n=E(e),o=n+E(r),i=new Uint8Array(o+r);return v(e,i,0),v(r,i,n),i.set(t,o),new A(e,r,t,i)})(e,t);return L.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&(t=this.multihash,r=e.multihash,t===r||t.code===r.code&&t.size===r.size&&((e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0})(t.bytes,r.bytes));var t,r}toString(e){const{bytes:t,version:r,_baseCache:n}=this;switch(r){case 0:return z(t,n,e||R.encoder);default:return j(t,n,e||S.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return V(/^0\.0/,q),!(!e||!e[$]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof L)return e;if(null!=e&&e.asCID===e){const{version:t,code:r,multihash:n,bytes:o}=e;return new L(t,r,n,o||H(t,r,n.bytes))}if(null!=e&&!0===e[$]){const{version:t,multihash:r,code:n}=e,o=k(r);return L.create(t,n,o)}return null}static create(e,t,r){if("number"!==typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==M)throw new Error(`Version 0 CID must use dag-pb (code: ${M}) block encoding`);return new L(e,t,r,r.bytes);case 1:{const n=H(e,t,r.bytes);return new L(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return L.create(0,M,e)}static createV1(e,t){return L.create(1,e,t)}static decode(e){const[t,r]=L.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=L.inspectBytes(e),r=t.size-t.multihashSize,n=T(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const o=n.subarray(t.multihashSize-t.digestSize),i=new A(t.multihashCode,t.digestSize,o,n);return[0===t.version?L.createV0(i):L.createV1(t.codec,i),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=b(e.subarray(t));return t+=n,r};let n=r(),o=M;if(18===n?(n=0,t=0):1===n&&(o=r()),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const i=t,s=r(),a=r(),u=t+a;return{version:n,codec:o,multihashCode:s,digestSize:a,multihashSize:u-i,size:u}}static parse(e,t){const[r,n]=O(e,t),o=L.decode(n);return o._baseCache.set(r,e),o}}const O=(e,t)=>{switch(e[0]){case"Q":{const r=t||R;return[R.prefix,r.decode(`${R.prefix}${e}`)]}case R.prefix:{const r=t||R;return[R.prefix,r.decode(e)]}case S.prefix:{const r=t||S;return[S.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},z=(e,t,r)=>{const{prefix:n}=r;if(n!==R.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const o=t.get(n);if(null==o){const o=r.encode(e).slice(1);return t.set(n,o),o}return o},j=(e,t,r)=>{const{prefix:n}=r,o=t.get(n);if(null==o){const o=r.encode(e);return t.set(n,o),o}return o},M=112,P=18,H=(e,t,r)=>{const n=E(e),o=n+E(t),i=new Uint8Array(o+r.byteLength);return v(e,i,0),v(t,i,n),i.set(r,o),i},$=Symbol.for("@ipld/js-cid/CID"),G={writable:!1,configurable:!1,enumerable:!0},F={writable:!1,enumerable:!1,configurable:!1},V=(e,t)=>{if(!e.test("0.0.0-dev"))throw new Error(t);console.warn(t)},q="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n",J=["string","number","bigint","symbol"],W=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function K(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";const t=typeof e;if(J.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e))return"Buffer";const r=function(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(W.includes(t))return t;return}(e);return r||"Object"}class Q{constructor(e,t,r){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Q.uint=new Q(0,"uint",!0),Q.negint=new Q(1,"negint",!0),Q.bytes=new Q(2,"bytes",!0),Q.string=new Q(3,"string",!0),Q.array=new Q(4,"array",!1),Q.map=new Q(5,"map",!1),Q.tag=new Q(6,"tag",!1),Q.float=new Q(7,"float",!0),Q.false=new Q(7,"false",!0),Q.true=new Q(7,"true",!0),Q.null=new Q(7,"null",!0),Q.undefined=new Q(7,"undefined",!0),Q.break=new Q(7,"break",!0);class X{constructor(e,t,r){this.type=e,this.value=t,this.encodedLength=r,this.encodedBytes=void 0}toString(){return`Token[${this.type}].${this.value}`}}const Y=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,Z=new TextDecoder,ee=new TextEncoder;function te(e){return Y&&globalThis.Buffer.isBuffer(e)}function re(e){return e instanceof Uint8Array?te(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const ne=Y?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):fe(e,t,r):(e,t,r)=>r-t>64?Z.decode(e.subarray(t,r)):fe(e,t,r),oe=Y?e=>e.length>64?globalThis.Buffer.from(e):ce(e):e=>e.length>64?ee.encode(e):ce(e),ie=e=>Uint8Array.from(e),se=Y?(e,t,r)=>te(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),ae=Y?(e,t)=>(e=e.map((e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e))),re(globalThis.Buffer.concat(e,t))):(e,t)=>{const r=new Uint8Array(t);let n=0;for(let o of e)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},ue=Y?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function ce(e,t=1/0){let r;const n=e.length;let o=null;const i=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function fe(e,t,r){const n=[];for(;t<r;){const o=e[t];let i=null,s=o>239?4:o>223?3:o>191?2:1;if(t+s<=r){let r,n,a,u;switch(s){case 1:o<128&&(i=o);break;case 2:r=e[t+1],128===(192&r)&&(u=(31&o)<<6|63&r,u>127&&(i=u));break;case 3:r=e[t+1],n=e[t+2],128===(192&r)&&128===(192&n)&&(u=(15&o)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:r=e[t+1],n=e[t+2],a=e[t+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(u=(15&o)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),t+=s}return function(e){const t=e.length;if(t<=he)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=he));return r}(n)}const he=4096;class le{constructor(e=256){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.chunks=[],this.cursor=0,this.maxCursor=-1,null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const r=t.length-(this.maxCursor-this.cursor)-1;t.set(e,r)}else{if(t){const e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=ue(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(1===this.chunks.length){const r=this.chunks[0];e&&this.cursor>r.length/2?(t=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=se(r,0,this.cursor)}else t=ae(this.chunks,this.cursor);return e&&this.reset(),t}}const de=[];function pe(e,t,r){if(e.length-t<r)throw new Error("CBOR decode error: not enough data for type")}de[23]=1,de[24]=2,de[25]=3,de[26]=5,de[27]=9;const we=[24,256,65536,4294967296,BigInt("18446744073709551616")];function me(e,t,r){pe(e,t,1);const n=e[t];if(!0===r.strict&&n<we[0])throw new Error("CBOR decode error: integer encoded in more bytes than necessary (strict decode)");return n}function ye(e,t,r){pe(e,t,2);const n=e[t]<<8|e[t+1];if(!0===r.strict&&n<we[1])throw new Error("CBOR decode error: integer encoded in more bytes than necessary (strict decode)");return n}function ge(e,t,r){pe(e,t,4);const n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===r.strict&&n<we[2])throw new Error("CBOR decode error: integer encoded in more bytes than necessary (strict decode)");return n}function be(e,t,r){pe(e,t,8);const n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],i=(BigInt(n)<<BigInt(32))+BigInt(o);if(!0===r.strict&&i<we[3])throw new Error("CBOR decode error: integer encoded in more bytes than necessary (strict decode)");if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(!0===r.allowBigInt)return i;throw new Error("CBOR decode error: integers outside of the safe integer range are not supported")}function ve(e,t){return Ee(e,0,t.value)}function Ee(e,t,r){if(r<we[0]){const n=Number(r);e.push([t|n])}else if(r<we[1]){const n=Number(r);e.push([24|t,n])}else if(r<we[2]){const n=Number(r);e.push([25|t,n>>>8,255&n])}else if(r<we[3]){const n=Number(r);e.push([26|t,n>>>24&255,n>>>16&255,n>>>8&255,255&n])}else{const n=BigInt(r);if(!(n<we[4]))throw new Error("CBOR decode error: encountered BigInt larger than allowable range");{const r=[27|t,0,0,0,0,0,0,0];let o=Number(n&BigInt(4294967295)),i=Number(n>>BigInt(32)&BigInt(4294967295));r[8]=255&o,o>>=8,r[7]=255&o,o>>=8,r[6]=255&o,o>>=8,r[5]=255&o,r[4]=255&i,i>>=8,r[3]=255&i,i>>=8,r[2]=255&i,i>>=8,r[1]=255&i,e.push(r)}}}ve.encodedSize=function(e){return Ee.encodedSize(e.value)},Ee.encodedSize=function(e){return e<we[0]?1:e<we[1]?2:e<we[2]?3:e<we[3]?5:9},ve.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};const Te=BigInt(-1),ke=BigInt(1);function Ae(e,t){const r=t.value,n="bigint"===typeof r?r*Te-ke:-1*r-1;Ee(e,t.type.majorEncoded,n)}function Ce(e,t,r,n){pe(e,t,r+n);const o=se(e,t+r,t+r+n);return new X(Q.bytes,o,r+n)}function Be(e,t,r,n){return Ce(e,t,1,r)}function Ie(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===Q.string?oe(e.value):e.value),e.encodedBytes}function xe(e,t){const r=Ie(t);Ee(e,t.type.majorEncoded,r.length),e.push(r)}function Ne(e,t,r,n){const o=r+n;return pe(e,t,o),new X(Q.string,ne(e,t+r,t+o),o)}function De(e,t,r,n){return Ne(e,t,1,r)}Ae.encodedSize=function(e){const t=e.value,r="bigint"===typeof t?t*Te-ke:-1*t-1;return r<we[0]?1:r<we[1]?2:r<we[2]?3:r<we[3]?5:9},Ae.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},xe.encodedSize=function(e){const t=Ie(e);return Ee.encodedSize(t.length)+t.length},xe.compareTokens=function(e,t){return r=Ie(e),n=Ie(t),r.length<n.length?-1:r.length>n.length?1:function(e,t){if(te(e)&&te(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}(r,n);var r,n};const _e=xe;function Ue(e,t,r,n){return new X(Q.array,n,r)}function Re(e,t,r,n){return Ue(0,0,1,r)}function Se(e,t){Ee(e,Q.array.majorEncoded,t.value)}function Le(e,t,r,n){return new X(Q.map,n,r)}function Oe(e,t,r,n){return Le(0,0,1,r)}function ze(e,t){Ee(e,Q.map.majorEncoded,t.value)}function je(e,t,r,n){return new X(Q.tag,r,1)}function Me(e,t){Ee(e,Q.tag.majorEncoded,t.value)}Se.compareTokens=ve.compareTokens,ze.compareTokens=ve.compareTokens,Me.compareTokens=ve.compareTokens;function Pe(e,t,r){if(r){if(!1===r.allowNaN&&Number.isNaN(e))throw new Error("CBOR decode error: NaN values are not supported");if(!1===r.allowInfinity&&(e===1/0||e===-1/0))throw new Error("CBOR decode error: Infinity values are not supported")}return new X(Q.float,e,t)}function He(e,t,r){const n=t.value;if(!1===n)e.push([20|Q.float.majorEncoded]);else if(!0===n)e.push([21|Q.float.majorEncoded]);else if(null===n)e.push([22|Q.float.majorEncoded]);else if(void 0===n)e.push([23|Q.float.majorEncoded]);else{let t,i=!1;r&&!0===r.float64||(Ve(n),t=qe(Fe,1),n===t||Number.isNaN(n)?(Fe[0]=249,e.push(Fe.slice(0,3)),i=!0):(Je(n),t=We(Fe,1),n===t&&(Fe[0]=250,e.push(Fe.slice(0,5)),i=!0))),i||(o=n,Ge.setFloat64(0,o,!1),t=Ke(Fe,1),Fe[0]=251,e.push(Fe.slice(0,9)))}var o}He.encodedSize=function(e,t){const r=e.value;if(!1===r||!0===r||null===r||void 0===r)return 1;let n;if(!t||!0!==t.float64){if(Ve(r),n=qe(Fe,1),r===n||Number.isNaN(r))return 3;if(Je(r),n=We(Fe,1),r===n)return 5}return 9};const $e=new ArrayBuffer(9),Ge=new DataView($e,1),Fe=new Uint8Array($e,0);function Ve(e){if(e===1/0)Ge.setUint16(0,31744,!1);else if(e===-1/0)Ge.setUint16(0,64512,!1);else if(Number.isNaN(e))Ge.setUint16(0,32256,!1);else{Ge.setFloat32(0,e);const t=Ge.getUint32(0),r=(2139095040&t)>>23,n=8388607&t;if(255===r)Ge.setUint16(0,31744,!1);else if(0===r)Ge.setUint16(0,(2147483648&e)>>16|n>>13,!1);else{const e=r-127;e<-24?Ge.setUint16(0,0):e<-14?Ge.setUint16(0,(2147483648&t)>>16|1<<24+e,!1):Ge.setUint16(0,(2147483648&t)>>16|e+15<<10|n>>13,!1)}}}function qe(e,t){if(e.length-t<2)throw new Error("CBOR decode error: not enough data for float16");const r=(e[t]<<8)+e[t+1];if(31744===r)return 1/0;if(64512===r)return-1/0;if(32256===r)return NaN;const n=r>>10&31,o=1023&r;let i;return i=0===n?o*2**-24:31!==n?(o+1024)*2**(n-25):0===o?1/0:NaN,32768&r?-i:i}function Je(e){Ge.setFloat32(0,e,!1)}function We(e,t){if(e.length-t<4)throw new Error("CBOR decode error: not enough data for float32");const r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function Ke(e,t){if(e.length-t<8)throw new Error("CBOR decode error: not enough data for float64");const r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}function Qe(e,t,r){throw new Error(`CBOR decode error: encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function Xe(e){return()=>{throw new Error(`CBOR decode error: ${e}`)}}He.compareTokens=ve.compareTokens;const Ye=[];for(let Xt=0;Xt<=23;Xt++)Ye[Xt]=Qe;Ye[24]=function(e,t,r,n){return new X(Q.uint,me(e,t+1,n),2)},Ye[25]=function(e,t,r,n){return new X(Q.uint,ye(e,t+1,n),3)},Ye[26]=function(e,t,r,n){return new X(Q.uint,ge(e,t+1,n),5)},Ye[27]=function(e,t,r,n){return new X(Q.uint,be(e,t+1,n),9)},Ye[28]=Qe,Ye[29]=Qe,Ye[30]=Qe,Ye[31]=Qe;for(let Xt=32;Xt<=55;Xt++)Ye[Xt]=Qe;Ye[56]=function(e,t,r,n){return new X(Q.negint,-1-me(e,t+1,n),2)},Ye[57]=function(e,t,r,n){return new X(Q.negint,-1-ye(e,t+1,n),3)},Ye[58]=function(e,t,r,n){return new X(Q.negint,-1-ge(e,t+1,n),5)},Ye[59]=function(e,t,r,n){const o=be(e,t+1,n);if("bigint"!==typeof o){const e=-1-o;if(e>=Number.MIN_SAFE_INTEGER)return new X(Q.negint,e,9)}if(!0!==n.allowBigInt)throw new Error("CBOR decode error: integers outside of the safe integer range are not supported");return new X(Q.negint,Te-BigInt(o),9)},Ye[60]=Qe,Ye[61]=Qe,Ye[62]=Qe,Ye[63]=Qe;for(let Xt=64;Xt<=87;Xt++)Ye[Xt]=Be;Ye[88]=function(e,t,r,n){return Ce(e,t,2,me(e,t+1,n))},Ye[89]=function(e,t,r,n){return Ce(e,t,3,ye(e,t+1,n))},Ye[90]=function(e,t,r,n){return Ce(e,t,5,ge(e,t+1,n))},Ye[91]=function(e,t,r,n){const o=be(e,t+1,n);if("bigint"===typeof o)throw new Error("CBOR decode error: 64-bit integer bytes lengths not supported");return Ce(e,t,9,o)},Ye[92]=Qe,Ye[93]=Qe,Ye[94]=Qe,Ye[95]=Xe("indefinite length bytes/strings are not supported");for(let Xt=96;Xt<=119;Xt++)Ye[Xt]=De;Ye[120]=function(e,t,r,n){return Ne(e,t,2,me(e,t+1,n))},Ye[121]=function(e,t,r,n){return Ne(e,t,3,ye(e,t+1,n))},Ye[122]=function(e,t,r,n){return Ne(e,t,5,ge(e,t+1,n))},Ye[123]=function(e,t,r,n){const o=be(e,t+1,n);if("bigint"===typeof o)throw new Error("CBOR decode error: 64-bit integer string lengths not supported");return Ne(e,t,9,o)},Ye[124]=Qe,Ye[125]=Qe,Ye[126]=Qe,Ye[127]=Xe("indefinite length bytes/strings are not supported");for(let Xt=128;Xt<=151;Xt++)Ye[Xt]=Re;Ye[152]=function(e,t,r,n){return Ue(0,0,2,me(e,t+1,n))},Ye[153]=function(e,t,r,n){return Ue(0,0,3,ye(e,t+1,n))},Ye[154]=function(e,t,r,n){return Ue(0,0,5,ge(e,t+1,n))},Ye[155]=function(e,t,r,n){const o=be(e,t+1,n);if("bigint"===typeof o)throw new Error("CBOR decode error: 64-bit integer array lengths not supported");return Ue(0,0,9,o)},Ye[156]=Qe,Ye[157]=Qe,Ye[158]=Qe,Ye[159]=function(e,t,r,n){if(!1===n.allowIndefinite)throw new Error("CBOR decode error: indefinite length items not allowed");return Ue(0,0,1,1/0)};for(let Xt=160;Xt<=183;Xt++)Ye[Xt]=Oe;Ye[184]=function(e,t,r,n){return Le(0,0,2,me(e,t+1,n))},Ye[185]=function(e,t,r,n){return Le(0,0,3,ye(e,t+1,n))},Ye[186]=function(e,t,r,n){return Le(0,0,5,ge(e,t+1,n))},Ye[187]=function(e,t,r,n){const o=be(e,t+1,n);if("bigint"===typeof o)throw new Error("CBOR decode error: 64-bit integer map lengths not supported");return Le(0,0,9,o)},Ye[188]=Qe,Ye[189]=Qe,Ye[190]=Qe,Ye[191]=function(e,t,r,n){if(!1===n.allowIndefinite)throw new Error("CBOR decode error: indefinite length items not allowed");return Le(0,0,1,1/0)};for(let Xt=192;Xt<=215;Xt++)Ye[Xt]=je;Ye[216]=function(e,t,r,n){return new X(Q.tag,me(e,t+1,n),2)},Ye[217]=function(e,t,r,n){return new X(Q.tag,ye(e,t+1,n),3)},Ye[218]=function(e,t,r,n){return new X(Q.tag,ge(e,t+1,n),5)},Ye[219]=function(e,t,r,n){return new X(Q.tag,be(e,t+1,n),9)},Ye[220]=Qe,Ye[221]=Qe,Ye[222]=Qe,Ye[223]=Qe;for(let Xt=224;Xt<=243;Xt++)Ye[Xt]=Xe("simple values are not supported");Ye[244]=Qe,Ye[245]=Qe,Ye[246]=Qe,Ye[247]=function(e,t,r,n){if(!1===n.allowUndefined)throw new Error("CBOR decode error: undefined values are not supported");return new X(Q.undefined,void 0,1)},Ye[248]=Xe("simple values are not supported"),Ye[249]=function(e,t,r,n){return Pe(qe(e,t+1),3,n)},Ye[250]=function(e,t,r,n){return Pe(We(e,t+1),5,n)},Ye[251]=function(e,t,r,n){return Pe(Ke(e,t+1),9,n)},Ye[252]=Qe,Ye[253]=Qe,Ye[254]=Qe,Ye[255]=function(e,t,r,n){if(!1===n.allowIndefinite)throw new Error("CBOR decode error: indefinite length items not allowed");return new X(Q.break,void 0,1)};const Ze=[];for(let Xt=0;Xt<24;Xt++)Ze[Xt]=new X(Q.uint,Xt,1);for(let Xt=-1;Xt>=-24;Xt--)Ze[31-Xt]=new X(Q.negint,Xt,1);Ze[64]=new X(Q.bytes,new Uint8Array(0),1),Ze[96]=new X(Q.string,"",1),Ze[128]=new X(Q.array,0,1),Ze[160]=new X(Q.map,0,1),Ze[244]=new X(Q.false,!1,1),Ze[245]=new X(Q.true,!0,1),Ze[246]=new X(Q.null,null,1);const et={float64:!1,mapSorter:function(e,t){const r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);const o=r.type.major,i=tt[o].compareTokens(r,n);0===i&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone");return i},quickEncodeToken:function(e){switch(e.type){case Q.false:return ie([244]);case Q.true:return ie([245]);case Q.null:return ie([246]);case Q.bytes:return e.value.length?void 0:ie([64]);case Q.string:return""===e.value?ie([96]):void 0;case Q.array:return 0===e.value?ie([128]):void 0;case Q.map:return 0===e.value?ie([160]):void 0;case Q.uint:return e.value<24?ie([Number(e.value)]):void 0;case Q.negint:if(e.value>=-24)return ie([31-Number(e.value)])}}},tt=[];tt[Q.uint.major]=ve,tt[Q.negint.major]=Ae,tt[Q.bytes.major]=xe,tt[Q.string.major]=_e,tt[Q.array.major]=Se,tt[Q.map.major]=ze,tt[Q.tag.major]=Me,tt[Q.float.major]=He;const rt=new le;class nt{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error("CBOR encode error: object contains circular references");return new nt(t,e)}}const ot={null:new X(Q.null,null),undefined:new X(Q.undefined,void 0),true:new X(Q.true,!0),false:new X(Q.false,!1),emptyArray:new X(Q.array,0),emptyMap:new X(Q.map,0)},it={number:(e,t,r,n)=>Number.isInteger(e)&&Number.isSafeInteger(e)?new X(e>=0?Q.uint:Q.negint,e):new X(Q.float,e),bigint:(e,t,r,n)=>e>=BigInt(0)?new X(Q.uint,e):new X(Q.negint,e),Uint8Array:(e,t,r,n)=>new X(Q.bytes,e),string:(e,t,r,n)=>new X(Q.string,e),boolean:(e,t,r,n)=>e?ot.true:ot.false,null:(e,t,r,n)=>ot.null,undefined:(e,t,r,n)=>ot.undefined,ArrayBuffer:(e,t,r,n)=>new X(Q.bytes,new Uint8Array(e)),DataView:(e,t,r,n)=>new X(Q.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),Array(e,t,r,n){if(!e.length)return!0===r.addBreakTokens?[ot.emptyArray,new X(Q.break)]:ot.emptyArray;n=nt.createCheck(n,e);const o=[];let i=0;for(const s of e)o[i++]=st(s,r,n);return r.addBreakTokens?[new X(Q.array,e.length),o,new X(Q.break)]:[new X(Q.array,e.length),o]},Object(e,t,r,n){const o="Object"!==t,i=o?e.keys():Object.keys(e),s=o?e.size:i.length;if(!s)return!0===r.addBreakTokens?[ot.emptyMap,new X(Q.break)]:ot.emptyMap;n=nt.createCheck(n,e);const a=[];let u=0;for(const c of i)a[u++]=[st(c,r,n),st(o?e.get(c):e[c],r,n)];return function(e,t){t.mapSorter&&e.sort(t.mapSorter)}(a,r),r.addBreakTokens?[new X(Q.map,s),a,new X(Q.break)]:[new X(Q.map,s),a]}};it.Map=it.Object,it.Buffer=it.Uint8Array;for(const Xt of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))it[`${Xt}Array`]=it.DataView;function st(e,t={},r){const n=K(e),o=t&&t.typeEncoders&&t.typeEncoders[n]||it[n];if("function"===typeof o){const i=o(e,n,t,r);if(null!=i)return i}const i=it[n];if(!i)throw new Error(`CBOR encode error: unsupported type: ${n}`);return i(e,n,t,r)}function at(e,t,r,n){if(Array.isArray(t))for(const o of t)at(e,o,r,n);else r[t.type.major](e,t,n)}function ut(e,t,r){const n=st(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){const e=r.quickEncodeToken(n);if(e)return e;const o=t[n.type.major];if(o.encodedSize){const e=o.encodedSize(n,r),t=new le(e);if(o(t,n,r),1!==t.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return re(t.chunks[0])}}return at(rt,n,t,r),rt.toBytes(!0)}const ct={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class ft{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let t=Ze[e];if(void 0===t){const r=Ye[e];if(!r)throw new Error(`CBOR decode error: no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const n=31&e;t=r(this.data,this.pos,n,this.options)}return this.pos+=t.encodedLength,t}}const ht=Symbol.for("DONE"),lt=Symbol.for("BREAK");function dt(e,t){if(e.done())return ht;const r=e.next();if(r.type===Q.break)return lt;if(r.type.terminal)return r.value;if(r.type===Q.array)return function(e,t,r){const n=[];for(let o=0;o<e.value;o++){const i=dt(t,r);if(i===lt){if(e.value===1/0)break;throw new Error("CBOR decode error: got unexpected break to lengthed array")}if(i===ht)throw new Error(`CBOR decode error: found array but not enough entries (got ${o}, expected ${e.value})`);n[o]=i}return n}(r,e,t);if(r.type===Q.map)return function(e,t,r){const n=!0===r.useMaps,o=n?void 0:{},i=n?new Map:void 0;for(let s=0;s<e.value;s++){const a=dt(t,r);if(a===lt){if(e.value===1/0)break;throw new Error("CBOR decode error: got unexpected break to lengthed map")}if(a===ht)throw new Error(`CBOR decode error: found map but not enough entries (got ${s} [no key], expected ${e.value})`);if(!0!==n&&"string"!==typeof a)throw new Error(`CBOR decode error: non-string keys not supported (got ${typeof a})`);const u=dt(t,r);if(u===ht)throw new Error(`CBOR decode error: found map but not enough entries (got ${s} [no value], expected ${e.value})`);n?i.set(a,u):o[a]=u}return n?i:o}(r,e,t);if(r.type===Q.tag){if(t.tags&&"function"===typeof t.tags[r.value]){const n=dt(e,t);return t.tags[r.value](n)}throw new Error(`CBOR decode error: tag not supported (${r.value})`)}throw new Error("unsupported")}const pt={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e)return null;const t=L.asCID(e);if(!t)return null;const r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new X(Q.tag,42),new X(Q.bytes,r)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};const wt={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};wt.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return L.decode(e.subarray(1))};const mt="dag-cbor",yt=113,gt=e=>{return t=e,r=pt,r=Object.assign({},et,r),ut(t,tt,r);var t,r},bt=e=>function(e,t){if(!(e instanceof Uint8Array))throw new Error("CBOR decode error: data to decode must be a Uint8Array");const r=(t=Object.assign({},ct,t)).tokenizer||new ft(e,t),n=dt(r,t);if(n===ht)throw new Error("CBOR decode error: did not find any content to decode");if(n===lt)throw new Error("CBOR decode error: got unexpected break");if(!r.done())throw new Error("CBOR decode error: too many terminals, data makes no sense");return n}(e,wt);Symbol.asyncIterator;Symbol.asyncIterator;Symbol.asyncIterator;Symbol.asyncIterator;const vt="raw",Et=85,Tt=e=>T(e),kt=e=>T(e),At=new TextDecoder;function Ct(e,t){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");const o=e[t++];if(r+=n<28?(127&o)<<n:(127&o)*2**n,o<128)break}return[r,t]}function Bt(e,t){let r;[r,t]=Ct(e,t);const n=t+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,n),n]}function It(e,t){let r;return[r,t]=Ct(e,t),[7&r,r>>3,t]}function xt(e){const t={},r=e.length;let n=0;for(;n<r;){let r,o;if([r,o,n]=It(e,n),1===o){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Hash`);if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,n]=Bt(e,n)}else if(2===o){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Name`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,n]=Bt(e,n),t.Name=At.decode(o)}else{if(3!==o)throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Tsize`);[t.Tsize,n]=Ct(e,n)}}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}const Nt=new TextEncoder,Dt=2**32;function _t(e,t){let r=t.length;if("number"===typeof e.Tsize){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");r=St(t,r,e.Tsize)-1,t[r]=24}if("string"===typeof e.Name){const n=Nt.encode(e.Name);r-=n.length,t.set(n,r),r=St(t,r,n.length)-1,t[r]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),r=St(t,r,e.Hash.length)-1,t[r]=10),t.length-r}function Ut(e){const t=function(e){let t=0;if(e.Data){const r=e.Data.length;t+=1+r+Lt(r)}if(e.Links)for(const r of e.Links){const e=Rt(r);t+=1+e+Lt(e)}return t}(e),r=new Uint8Array(t);let n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),n=St(r,n,e.Data.length)-1,r[n]=10),e.Links)for(let o=e.Links.length-1;o>=0;o--){const t=_t(e.Links[o],r.subarray(0,n));n-=t,n=St(r,n,t)-1,r[n]=18}return r}function Rt(e){let t=0;if(e.Hash){const r=e.Hash.length;t+=1+r+Lt(r)}if("string"===typeof e.Name){const r=Nt.encode(e.Name).length;t+=1+r+Lt(r)}return"number"===typeof e.Tsize&&(t+=1+Lt(e.Tsize)),t}function St(e,t,r){const n=t-=Lt(r);for(;r>=2147483648;)e[t++]=127&r|128,r/=128;for(;r>=128;)e[t++]=127&r|128,r>>>=7;return e[t]=r,n}function Lt(e){return e%2===0&&e++,Math.floor((function(e){let t=0;e>=Dt&&(e=Math.floor(e/Dt),t=32);e>=65536&&(e>>>=16,t+=16);e>=256&&(e>>>=8,t+=8);return t+Ot[e]}(e)+6)/7)}const Ot=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],zt=["Data","Links"],jt=["Hash","Name","Tsize"],Mt=new TextEncoder;function Pt(e,t){if(e===t)return 0;const r=e.Name?Mt.encode(e.Name):[],n=t.Name?Mt.encode(t.Name):[];let o=r.length,i=n.length;for(let s=0,a=Math.min(o,i);s<a;++s)if(r[s]!==n[s]){o=r[s],i=n[s];break}return o<i?-1:i<o?1:0}function Ht(e,t){return!Object.keys(e).some((e=>!t.includes(e)))}function $t(e){if("object"===typeof e.asCID){const t=L.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if("object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(e.Hash){let n=L.asCID(e.Hash);try{n||("string"===typeof e.Hash?n=L.parse(e.Hash):e.Hash instanceof Uint8Array&&(n=L.decode(e.Hash)))}catch(r){throw new TypeError(`Invalid DAG-PB form: ${r.message}`)}n&&(t.Hash=n)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return"string"===typeof e.Name&&(t.Name=e.Name),"number"===typeof e.Tsize&&(t.Tsize=e.Tsize),t}function Gt(e){if((e instanceof Uint8Array||"string"===typeof e)&&(e={Data:e}),"object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(void 0!==e.Data)if("string"===typeof e.Data)t.Data=Mt.encode(e.Data);else{if(!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");t.Data=e.Data}if(void 0!==e.Links){if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form");t.Links=e.Links.map($t),t.Links.sort(Pt)}else t.Links=[];return t}function Ft(e){if(!e||"object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");if(!Ht(e,zt))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==e.Data&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let t=0;t<e.Links.length;t++){const r=e.Links[t];if(!r||"object"!==typeof r||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!Ht(r,jt))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==r.Name&&"string"!==typeof r.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==r.Tsize&&("number"!==typeof r.Tsize||r.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t>0&&-1===Pt(r,e.Links[t-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Vt(e,t=[]){return Gt({Data:e,Links:t})}function qt(e,t,r){return $t({Hash:r,Name:e,Tsize:t})}const Jt="dag-pb",Wt=112;function Kt(e){Ft(e);const t={};return e.Links&&(t.Links=e.Links.map((e=>{const t={};return e.Hash&&(t.Hash=e.Hash.bytes),void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),e.Data&&(t.Data=e.Data),Ut(t)}function Qt(e){const t=function(e){const t=e.length;let r,n,o=0,i=!1;for(;o<t;){let t,s;if([t,s,o]=It(e,o),2!==t)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${t}`);if(1===s){if(n)throw new Error("protobuf: (PBNode) duplicate Data section");[n,o]=Bt(e,o),r&&(i=!0)}else{if(2!==s)throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${s}`);{if(i)throw new Error("protobuf: (PBNode) duplicate Links section");let t;r||(r=[]),[t,o]=Bt(e,o),r.push(xt(t))}}}if(o>t)throw new Error("protobuf: (PBNode) unexpected end of data");const s={};return n&&(s.Data=n),s.Links=r||[],s}(e),r={};return t.Data&&(r.Data=t.Data),t.Links&&(r.Links=t.Links.map((e=>{const t={};try{t.Hash=L.decode(e.Hash)}catch(r){}if(!t.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),r}globalThis.fetch,globalThis.FormData,globalThis.Headers,globalThis.Request,globalThis.Response,globalThis.Blob,globalThis.File,globalThis.ReadableStream,new URL("https://dweb.link/")}}]);